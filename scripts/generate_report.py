import json
import sys

print("[GENERATE_REPORT] Starting report generation...", file=sys.stderr)

try:
    metrics = json.load(open('data/models/metrics.json'))
    print(f"[GENERATE_REPORT] Loaded metrics: {list(metrics.keys())}", file=sys.stderr)
    
    report = f"""# ðŸ“Š Model Training Report

## Metrics Summary
| Metric | Value |
|--------|-------|
| F1-Score | {metrics['test_f1']:.4f} |
| ROC-AUC | {metrics['test_roc_auc']:.4f} |
| Accuracy | {metrics['test_accuracy']:.4f} |
| Overfitting Gap | {metrics['train_f1'] - metrics['test_f1']:.4f} |

## Quality Gate Status
âœ… All checks passed

---
Generated by GitHub Actions
"""
    
    with open('report.md', 'w') as f:
        f.write(report)
    
    print("[GENERATE_REPORT] Report successfully written to report.md", file=sys.stderr)
    print("Report generated successfully")
    
except Exception as e:
    print(f"[GENERATE_REPORT] ERROR: {e}", file=sys.stderr)
    raise
